<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Панель управления заявками</title>
    <meta name="format-detection" content="telephone=no">
    <link rel="stylesheet" href="./style.css">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        /* Inline critical CSS для быстрой первоначальной загрузки */
        body {
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            -webkit-font-smoothing: antialiased;
            background: var(--tg-theme-bg-color, #ffffff);
            color: var(--tg-theme-text-color, #222222);
        }
        .main-container {
            padding: 12px;
        }
        #requests-container {
            min-height: 60vh;
        }
    </style>
</head>
<body>
    <div class="main-container">
        <header class="app-header">
            <h1 class="app-title">Активные заявки</h1>
        </header>

        <div class="controls-container">
            <div class="filter-row">
                <select id="status-filter" class="filter-select">
                    <option value="all">Все заявки</option>
                    <option value="new">Новые</option>
                    <option value="in_progress">В работе</option>
                    <option value="completed">Завершённые</option>
                </select>
                <button id="refresh-btn" class="icon-button" aria-label="Обновить">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M17.65 6.35C16.2 4.9 14.21 4 12 4C7.58 4 4 7.58 4 12C4 16.42 7.58 20 12 20C15.73 20 18.84 17.45 19.73 14H17.65C16.83 16.33 14.61 18 12 18C8.69 18 6 15.31 6 12C6 8.69 8.69 6 12 6C13.66 6 15.14 6.69 16.22 7.78L13 11H20V4L17.65 6.35Z" fill="currentColor"/>
                    </svg>
                </button>
            </div>

            <div class="search-row">
                <div class="search-input-container">
                    <svg class="search-icon" width="20" height="20" viewBox="0 0 24 24" fill="none">
                        <path d="M15.5 14H14.71L14.43 13.73C15.41 12.59 16 11.11 16 9.5C16 5.91 13.09 3 9.5 3C5.91 3 3 5.91 3 9.5C3 13.09 5.91 16 9.5 16C11.11 16 12.59 15.41 13.73 14.43L14 14.71V15.5L19 20.49L20.49 19L15.5 14ZM9.5 14C7.01 14 5 11.99 5 9.5C5 7.01 7.01 5 9.5 5C11.99 5 14 7.01 14 9.5C14 11.99 11.99 14 9.5 14Z" fill="var(--tg-theme-hint-color)"/>
                    </svg>
                    <input type="text" id="search-input" class="search-input" placeholder="Поиск по заявкам" autocorrect="off" spellcheck="false">
                    <button id="clear-search" class="clear-button" aria-label="Очистить поиск">×</button>
                </div>
                <button id="search-btn" class="search-button">Найти</button>
            </div>
        </div>

        <div id="requests-container" class="requests-list">
            <div class="loading-state">
                <div class="loading-spinner"></div>
                <p>Загрузка данных...</p>
            </div>
        </div>

        <footer class="stats-footer">
            <div class="stats-grid">
                <div class="stat-card">
                    <span class="stat-value" id="new-count">0</span>
                    <span class="stat-label">Новые</span>
                </div>
                <div class="stat-card">
                    <span class="stat-value" id="progress-count">0</span>
                    <span class="stat-label">В работе</span>
                </div>
                <div class="stat-card">
                    <span class="stat-value" id="completed-count">0</span>
                    <span class="stat-label">Завершены</span>
                </div>
            </div>
        </footer>
    </div>

    <script src="./script.js"></script>
</body>
</html>